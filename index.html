<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script type="text/javascript" src="https://pyscript.net/latest/pyscript.js"></script>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <style>
        body { background-color: #f5f7fb; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .navbar { background: linear-gradient(135deg, #4361ee, #3f37c9); }
        .card { border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 20px; border: none; }
        .card-header { background: linear-gradient(135deg, #4361ee, #3f37c9); color: white; border-radius: 12px 12px 0 0 !important; }
        .dashboard-card { transition: transform 0.3s; }
        .dashboard-card:hover { transform: translateY(-5px); }
        .nav-link { color: #212529; font-weight: 500; padding: 10px 15px; border-radius: 8px; margin: 0 5px; }
        .nav-link:hover, .nav-link.active { background-color: #4361ee; color: white; }
        .notification { position: fixed; top: 20px; right: 20px; z-index: 1050; opacity: 0; transition: opacity 0.5s; }
        .notification.show { opacity: 1; }
        .page { display: none; }
        #dashboard-page { display: block; }
        .stat-value { font-size: 1.8rem; font-weight: bold; color: #4361ee; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark mb-4">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="bi bi-wallet2 me-2"></i> Expense Tracker</a>
        </div>
    </nav>

    <div class="container">
        <div class="alert alert-success notification" id="notification"></div>

        <div class="page" id="dashboard-page">
            <div class="row">
                <div class="col-md-3">
                    <div class="card dashboard-card text-center p-3">
                        <div class="card-body">
                            <i class="bi bi-cash-stack display-4 text-primary"></i>
                            <h5 class="mt-3">Total Expenses</h5>
                            <p class="stat-value" id="total-expenses">$0.00</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card dashboard-card text-center p-3">
                        <div class="card-body">
                            <i class="bi bi-calendar-month display-4 text-primary"></i>
                            <h5 class="mt-3">Monthly Expenses</h5>
                            <p class="stat-value" id="monthly-expenses">$0.00</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card dashboard-card text-center p-3">
                        <div class="card-body">
                            <i class="bi bi-arrow-repeat display-4 text-primary"></i>
                            <h5 class="mt-3">Total Subscriptions</h5>
                            <p class="stat-value" id="total-subscriptions">$0.00</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card dashboard-card text-center p-3">
                        <div class="card-body">
                            <i class="bi bi-calendar-check display-4 text-primary"></i>
                            <h5 class="mt-3">Monthly Subscriptions</h5>
                            <p class="stat-value" id="monthly-subscriptions">$0.00</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header"><h5 class="mb-0">Recent Expenses</h5></div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr><th>Description</th><th>Amount</th><th>Category</th><th>Date</th></tr>
                                    </thead>
                                    <tbody id="recent-expenses">
                                        <tr><td colspan="4" class="text-center">No recent expenses</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header"><h5 class="mb-0">Upcoming Subscriptions</h5></div>
                        <div class="card-body">
                            <ul class="list-group" id="upcoming-subscriptions">
                                <li class="list-group-item">No upcoming subscriptions</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="page" id="expenses-page">
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header"><h5 class="mb-0">Add New Expense</h5></div>
                        <div class="card-body">
                            <form id="expense-form">
                                <div class="mb-3">
                                    <label for="expense-description" class="form-label">Description</label>
                                    <input type="text" class="form-control" id="expense-description" required>
                                </div>
                                <div class="mb-3">
                                    <label for="expense-amount" class="form-label">Amount ($)</label>
                                    <input type="number" class="form-control" id="expense-amount" min="0" step="0.01" required>
                                </div>
                                <div class="mb-3">
                                    <label for="expense-category" class="form-label">Category</label>
                                    <select class="form-select" id="expense-category" required>
                                        <option value="">Select a category</option>
                                        <option value="Food">Food</option>
                                        <option value="Transport">Transport</option>
                                        <option value="Entertainment">Entertainment</option>
                                        <option value="Utilities">Utilities</option>
                                        <option value="Shopping">Shopping</option>
                                        <option value="Healthcare">Healthcare</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="expense-date" class="form-label">Date</label>
                                    <input type="date" class="form-control" id="expense-date">
                                </div>
                                <button type="submit" class="btn btn-primary w-100" id="add-expense-btn">
                                    <i class="bi bi-plus-circle me-1"></i> Add Expense
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">All Expenses</h5>
                            <div>
                                <select class="form-select form-select-sm" id="expense-category-filter">
                                    <option value="">All Categories</option>
                                    <option value="Food">Food</option>
                                    <option value="Transport">Transport</option>
                                    <option value="Entertainment">Entertainment</option>
                                    <option value="Utilities">Utilities</option>
                                    <option value="Shopping">Shopping</option>
                                    <option value="Healthcare">Healthcare</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr><th>Description</th><th>Amount</th><th>Category</th><th>Date</th><th>Actions</th></tr>
                                    </thead>
                                    <tbody id="expenses-list">
                                        <tr><td colspan="5" class="text-center">No expenses recorded</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="page" id="subscriptions-page">
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header"><h5 class="mb-0">Add New Subscription</h5></div>
                        <div class="card-body">
                            <form id="subscription-form">
                                <div class="mb-3">
                                    <label for="subscription-name" class="form-label">Service Name</label>
                                    <input type="text" class="form-control" id="subscription-name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="subscription-amount" class="form-label">Amount ($)</label>
                                    <input type="number" class="form-control" id="subscription-amount" min="0" step="0.01" required>
                                </div>
                                <div class="mb-3">
                                    <label for="subscription-category" class="form-label">Category</label>
                                    <select class="form-select" id="subscription-category" required>
                                        <option value="">Select a category</option>
                                        <option value="Streaming">Streaming</option>
                                        <option value="Software">Software</option>
                                        <option value="Gaming">Gaming</option>
                                        <option value="Memberships">Memberships</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="subscription-start-date" class="form-label">Start Date</label>
                                    <input type="date" class="form-control" id="subscription-start-date" required>
                                </div>
                                <div class="mb-3">
                                    <label for="subscription-billing-cycle" class="form-label">Billing Cycle</label>
                                    <select class="form-select" id="subscription-billing-cycle" required>
                                        <option value="">Select billing cycle</option>
                                        <option value="weekly">Weekly</option>
                                        <option value="monthly">Monthly</option>
                                        <option value="yearly">Yearly</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary w-100" id="add-subscription-btn">
                                    <i class="bi bi-plus-circle me-1"></i> Add Subscription
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">All Subscriptions</h5>
                            <div>
                                <select class="form-select form-select-sm" id="subscription-category-filter">
                                    <option value="">All Categories</option>
                                    <option value="Streaming">Streaming</option>
                                    <option value="Software">Software</option>
                                    <option value="Gaming">Gaming</option>
                                    <option value="Memberships">Memberships</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr><th>Service Name</th><th>Amount</th><th>Category</th><th>Billing Cycle</th><th>Next Payment</th><th>Actions</th></tr>
                                    </thead>
                                    <tbody id="subscriptions-list">
                                        <tr><td colspan="6" class="text-center">No subscriptions recorded</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="page" id="reports-page">
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header"><h5 class="mb-0">Generate Report</h5></div>
                        <div class="card-body">
                            <form id="report-form">
                                <div class="mb-3">
                                    <label for="report-start-date" class="form-label">Start Date</label>
                                    <input type="date" class="form-control" id="report-start-date" required>
                                </div>
                                <div class="mb-3">
                                    <label for="report-end-date" class="form-label">End Date</label>
                                    <input type="date" class="form-control" id="report-end-date" required>
                                </div>
                                <button type="submit" class="btn btn-primary w-100" id="generate-report">
                                    <i class="bi bi-graph-up me-1"></i> Generate Report
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header"><h5 class="mb-0">Report Results</h5></div>
                        <div class="card-body">
                            <div id="report-results" class="p-3">
                                <p class="text-muted">Select a date range and generate a report to see your expense breakdown.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <py-script>
        # Import the ExpenseTracker class and run the application
        from expense_tracker import ExpenseTracker
        ExpenseTracker()
    </py-script>
</body>
</html>